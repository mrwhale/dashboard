class Dashing.Stswitch extends Dashing.ClickableWidget
  constructor: ->
    super  

postState: ->
    newState = @toggleState()
    $.post '/smartthings/dispatch',
      deviceType: 'switch',
      deviceId: @get('device'),
      command: newState,
      (data) =>
        json = JSON.parse data
        if json.error != 0
          @toggleState()

  ready: ->

  onClick: (event) ->
    @postState()
